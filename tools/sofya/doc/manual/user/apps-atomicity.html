<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Sofya User Manual: Applications: Atomicity Checker</title>
</head>
<body>

<h2 style="text-align:center">Running the reduction-based atomicity checker</h2>

<p>The atomicity checker provided with &#931;&#959;&#966;&#943;&#945; attempts
to determine whether all observed executions of each method in a multi-threaded
program are atomic. It is based on the technique for <i>reduction</i> first
introduced by Lipton (<a href="http://portal.acm.org/citation.cfm?id=361234">paper</a>),
and implements the refinements proposed by Wang and Stoller
(<a href="ftp://ftp.cs.sunysb.edu/pub/stoller/runtime-atomicity-TSE-2006.pdf">paper</a>).
We refer the user to the linked resources for details. There are two steps
to run the atomicity checker on a program.</p>

<h3>Instrumenting for atomicity checking</h3>

<p>The <code>SemanticInstrumentor</code> provides a special parameter to instrument
a program for atomicity checking.  When this parameter is specified, it is not
necessary to provide an event description language (EDL) specification to the
instrumentor; you only need to specify the name of a
<a href="progfile.html">program list file</a> identifying the set of classes
comprising the program on which atomicity checking is to be performed.
The command to invoke the instrumentor is as follows:</p>

<p><code>java sofya.ed.semantic.SemanticInstrumentor -atom -dabe <i>list_file</i></code></p>

<p>The first parameter is the key parameter that instructs the instrumentor to
insert instrumentation for atomicity checking. Note that this instrumentation is
not different from the instrumentation normally provided by the instrumentor; the
same instrumentation could be inserted by an EDL specification. This parameter
is simply a shorthand to conveniently ensure that the correct instrumentation
is inserted. The second parameter disables a special set of events that are not
necessary for atomicity checking, to improve performance. The third parameter,
as noted previously, is the list file identifying the classes to be
instrumented.</p>

<p>When the instrumentor is run, it will instrument the specified classes and output
a data file to be used by the atomicity checker. This data file will be the name of
the specified program list file, with the extension replaced by 'ed.dat'. This
file contains information that will be used by the <code>SemanticEventDispatcher</code>
to dispatch the event stream.</p>

<h3>Running the atomicity checker</h3>

<p>Once the program is instrumented, you are ready to run the atomicity checker.
The command to do this is as follows:</p>

<p><code>java sofya.apps.AtomicityChecker -md &lt;data_file&gt; -main &lt;main_class&gt;
  [arg1 arg2 ...]</code></p>

<p>The '-md' argument specifies the name of the 'ed.dat' file generated by the
instrumentor. The '-main' argument is used to identify the class that should be used
to launch the program, and can be followed by any number of arguments that should
be passed to the launched program.</p>

<p>The output of the atomicity checker will be a list of the methods that the
program executed and whether or not each method was found to be atomic on all
executions during this program run.</p>

<p>&nbsp;</p>
</body>
</html>
